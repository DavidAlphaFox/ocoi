<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>commandline (ocoi.commandline)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="index.html">Up</a> â€“ <a href="index.html">ocoi</a> &#x00BB; commandline</nav><h1 id="ocaml-on-ice-commands"><a href="#ocaml-on-ice-commands" class="anchor"></a>OCaml On Ice commands</h1><p>OCaml On Ice provides a command line tool <code>ocoi</code> to help build applications. This page gives an overview of its commands. Further documentation can be found by doing <code>ocoi help</code> or <code>ocoi help COMMAND</code>. You can use any unique prefix of a command as an abbreviation, for example <code>ocoi g s my_model</code> is an alias for <code>ocoi generate
scaffold my_model</code>.</p><nav class="toc"><ul><li><a href="#commands-reference">Commands reference</a><ul><li><a href="#ocoi-new-project_name"><code>ocoi new PROJECT_NAME</code></a></li><li><a href="#ocoi-generate"><code>ocoi generate</code></a><ul><li><a href="#ocoi-generate-controller-path_to_model"><code>ocoi generate controller PATH_TO_MODEL</code></a></li><li><a href="#ocoi-generate-queries-path_to_model"><code>ocoi generate queries PATH_TO_MODEL</code></a></li><li><a href="#ocoi-generate-scaffold-path_to_model"><code>ocoi generate scaffold PATH_TO_MODEL</code></a></li></ul></li><li><a href="#ocoi-server"><code>ocoi server</code></a></li><li><a href="#ocoi-db"><code>ocoi db</code></a><ul><li><a href="#ocoi-db-migrate-model"><code>ocoi db migrate MODEL</code></a></li><li><a href="#ocoi-db-rollback-model"><code>ocoi db rollback MODEL</code></a></li></ul></li><li><a href="#ocoi-help"><code>ocoi help</code></a></li></ul></li></ul></nav></header><h2 id="commands-reference"><a href="#commands-reference" class="anchor"></a>Commands reference</h2><h3 id="ocoi-new-project_name"><a href="#ocoi-new-project_name" class="anchor"></a><code>ocoi new PROJECT_NAME</code></h3><p>Creates a directory <code>PROJECT_NAME</code> containing a skeleton project.</p><h3 id="ocoi-generate"><a href="#ocoi-generate" class="anchor"></a><code>ocoi generate</code></h3><p>Generates various kinds of code from models.</p><h4 id="ocoi-generate-controller-path_to_model"><a href="#ocoi-generate-controller-path_to_model" class="anchor"></a><code>ocoi generate controller PATH_TO_MODEL</code></h4><p>Given a path to some file <code>mymodel.ml</code> in <code>app/models</code>, generates a controller implementing basic CRUD functionality for it in <code>app/controllers/mymodel.ml</code>. The generated <a href="Ocoi__/Controllers/module-type-Crud/index.html"><code>Ocoi.Controllers.Crud</code></a> module must be registered (connected to Opium) to be used.</p><h4 id="ocoi-generate-queries-path_to_model"><a href="#ocoi-generate-queries-path_to_model" class="anchor"></a><code>ocoi generate queries PATH_TO_MODEL</code></h4><p>Given a path to some file <code>mymodel.ml</code> in <code>app/models</code>, generates Postgresql queries implementing basic CRUD functionality for it in <code>app/queries/mymodel.ml</code> and associated migration and rollback scripts in <code>app/db/migrate</code>.</p><h4 id="ocoi-generate-scaffold-path_to_model"><a href="#ocoi-generate-scaffold-path_to_model" class="anchor"></a><code>ocoi generate scaffold PATH_TO_MODEL</code></h4><p>Shortcut that runs both <code>ocoi generate controller</code> and <code>ocoi generate queries</code> for a model.</p><h3 id="ocoi-server"><a href="#ocoi-server" class="anchor"></a><code>ocoi server</code></h3><p>Builds the app, starts it as a server (on port 3000) and starts watching for changes. When a file is changed, rebuilds and restarts the server. Should be executed in root project directory. This shouldn't be used in production (since there should be no need to rebuild the app or even have the source code in the production environment) although the underlying <code>main.exe</code> executable will be used in production deployments.</p><h3 id="ocoi-db"><a href="#ocoi-db" class="anchor"></a><code>ocoi db</code></h3><p>Performs database migrations or rollbacks for a model. Should be executed in the root project directory.</p><h4 id="ocoi-db-migrate-model"><a href="#ocoi-db-migrate-model" class="anchor"></a><code>ocoi db migrate MODEL</code></h4><p>Given the name of a model <code>mymodel</code> (not a path as for <code>ocoi generate</code>), builds and runs the migration script <code>app/db/migrate/mymodel_migrate.ml</code> that creates the table used by the model.</p><h4 id="ocoi-db-rollback-model"><a href="#ocoi-db-rollback-model" class="anchor"></a><code>ocoi db rollback MODEL</code></h4><p>Given the name of a model <code>mymodel</code>, builds and run the rollback script <code>app/db/migrate/mymodel_rollback.ml</code> that deletes the table used by the model.</p><h3 id="ocoi-help"><a href="#ocoi-help" class="anchor"></a><code>ocoi help</code></h3><p>Lists <code>ocoi</code> commands. Can be used with a command as an argument to give help for it.</p></div></body></html>